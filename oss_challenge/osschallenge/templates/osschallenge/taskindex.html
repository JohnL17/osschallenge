{% extends 'osschallenge/index.html' %}
{% load i18n %}
{% load thumbnail %}
{% load static %}

{% block content %}
<div class="content">
    <div class="taskindex">
        <div class="search-function">
            <form class="search" method=get">
                <div><input class="form-control" type="text" name="search" placeholder="search task"></div>
                <div><input class="btn btn-primary" type="submit" value="Submit"></div>
            </form>
        </div>
        {% if match_list %}
        <div class="grid grid--2of12 task-grid">
            {% for match in match_list %}
            <div class="grid-cell">
                <div class="card">
                    <a href="/tasks/{{ match.id }}">
                        <div class="task-status">
                            {% if match.task_done == True %}
                            <h5>{% trans "done" %} {% trans "by" %} {{ match.assignee }}</h5>
                            {% elif match.assignee_id != NULL %}
                            <h5>{% trans "claimed" %} {% trans "by" %} {{ match.assignee }}</h5>
                            {% else %}
                            <h5>{% trans "free" %}</h5>
                            {% endif %}
                        </div>
                        <div class="task-picture">
                            {% if match.picture %}
                            <img class="task-index-picture" src="{{ match.picture.avatar.url }}" alt="Card image">
                            {% else %}
                            <img class="task-index-picture" src="{% static "osschallenge/example.jpg" %}">
                            {% endif %}
                        </div>
                        <div class="card-block">
                            <div class="project-title">
                                <h4 class="card-title">{{ match.project.title }}</h4>
                            </div>
                            <div class="task-title">
                                <h6 class="card-subtitle text-muted">{{ match.title }}</h6>
                            </div>
                            <div class="task-description">
                                </br> <p class="card-text task-text">{{ match.description }}</p>
                            </div>
                        </div>
                    </a>
                </div>
            </div>
            {% endfor %}
        </div>
        {% elif task_list %}
        <div class="grid grid--2of12 task-grid">
            {% for task in task_list %}
            <div class="grid-cell">
                <div class="card">
                    <a href="/tasks/{{ task.id }}">
                        <div class="task-status">
                            {% if task.task_done == True %}
                            <h5>{% trans "done" %} {% trans "by" %} {{ task.assignee }}</h5>
                            {% elif task.assignee_id != NULL %}
                            <h5>{% trans "claimed" %} {% trans "by" %} {{ task.assignee }}</h5>
                            {% else %}
                            <h5>{% trans "free" %}</h5>
                            {% endif %}
                        </div>
                        <div class="task-picture">
                            {% if task.picture %}
                            <img class="task-index-picture" src="{{ task.picture.avatar.url }}" alt="Card image">
                            {% else %}
                            <img class="task-index-picture" src="{% static "osschallenge/example.jpg" %}">
                            {% endif %}
                        </div>
                        <div class="card-block">
                            <div class="project-title">
                                <h4 class="card-title">{{ task.project.title }}</h4>
                            </div>
                            <div class="task-title">
                                <h6 class="card-subtitle text-muted">{{ task.title }}</h6>
                            </div>
                            <div class="task-description">
                                </br> <p class="card-text task-text">{{ task.description }}</p>
                            </div>
                        </div>
                    </a>
                </div>
            </div>
            {% endfor %}
        </div>
        {% else %}
        <p>{% trans "No tasks available." %}</p>
        {% endif %}
    </div>
</div>
{% endblock content %}
